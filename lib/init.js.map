{"version":3,"sources":["../src/init.js"],"names":["init","db","require","executeAsync","t_logs","t_user","console","log","code","error","process","exit","module","exports"],"mappings":";;;;;;;;;;;;AAEA,IAAIA;AAAA,0EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,0BADC,GACIC,QAAQ,cAAR,CADJ;AAAA;AAAA;AAAA,+BAGgBD,GAAGE,YAAH,obASZ,IATY,CAHhB;;AAAA;AAGCC,8BAHD;AAAA;AAAA,+BAagBH,GAAGE,YAAH,6iBAbhB;;AAAA;AAaCE,8BAbD;;AA0BHC,gCAAQC,GAAR,kBAA2BH,MAA3B,iBAA6CC,MAA7C;AA1BG;AAAA;;AAAA;AAAA;AAAA;;AA4BH,4BAAG,YAAEG,IAAF,IAAU,cAAb,EAA6B;AACzBF,oCAAQG,KAAR,CAAc,WAAd;AACH,yBAFD,MAEO;AACHH,oCAAQG,KAAR;AACH;AACDC,gCAAQC,IAAR,CAAa,CAAb;;AAjCG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA,GAAJ;;AAqCAC,OAAOC,OAAP,GAAiBb,IAAjB","file":"init.js","sourcesContent":["//初始化数据\n\nlet init = async () => {\n    const db = require('./service/db');\n    try {\n        let t_logs = await db.executeAsync(`\n            CREATE TABLE IF NOT EXISTS \\`t_logs\\` (\n            \\`id\\` int(11) NOT NULL AUTO_INCREMENT,\n            \\`level\\` enum('error','info','warn') DEFAULT 'info',\n            \\`content\\` varchar(255) NOT NULL,\n            \\`userId\\` varchar(45) NOT NULL,\n            \\`createTime\\` varchar(45) DEFAULT NULL,\n            PRIMARY KEY (\\`id\\`)\n            ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=UTF8;\n            `, null);\n        let t_user = await db.executeAsync(`\n            CREATE TABLE IF NOT EXISTS \\`t_user\\` (\n            \\`id\\` int(11) NOT NULL AUTO_INCREMENT,\n            \\`username\\` varchar(45) DEFAULT NULL,\n            \\`password\\` char(32) DEFAULT NULL,\n            \\`url\\` varchar(45) DEFAULT NULL,\n            \\`token\\` varchar(45) DEFAULT NULL,\n            \\`lastTime\\` bigint(13) NOT NULL,\n            \\`createTime\\` bigint(13) DEFAULT NULL,\n            PRIMARY KEY (\\`id\\`),\n            UNIQUE KEY \\`username_UNIQUE\\` (\\`username\\`)\n            ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=UTF8;\n        `);\n        console.log(`init t_logs=${t_logs}, t_user=${t_user}`);\n    } catch(e) {\n        if(e.code == 'ECONNREFUSED') {\n            console.error('无法连接数据库~!');\n        } else {\n            console.error(e);\n        }\n        process.exit(0);\n    }\n};\n\nmodule.exports = init;"]}